<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:j="http://xmlns.jcp.org/jsf">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="../resources/css/default.css" rel="stylesheet"/>
        <link href="../resources/css/dataTables.bootstrap4.css" rel="stylesheet"/>
        <link href="../resources/css/bootstrap.min.css" rel="stylesheet"/>
        <link href="../resources/css/sb-admin.css" rel="stylesheet"/>
        <link href="../resources/fontawesome-free/css/all.min.css" rel="stylesheet"/>
        <title>Quantum - Flamencos</title>
        <style>

        </style>

    </head>

    <body>

        <ui:composition template="./plantilla.xhtml">

            <ui:define name="content">
                <div class="container-fluid">
                    <div class="row flex-grow">
                        <div class="card col-xs-12 col-sm-12 col-md-12 col-lg-7 col-xl-6  d-flex align-items-stretch" style="margin-bottom: 10px;">
                            <div class="card-body" style="padding: 0.5rem 0.5rem !important;">
                                <div class="media">
                                    <i class="mdi mdi-account  icon-md text-primary d-flex align-self-start mr-2"></i>
                                    <div class="media-body">
                                        <p class="card-text"><h3 class="card-title">CrystalBeach Resort</h3></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row flex-grow">
                        <div class="card col-xs-12 col-sm-12 col-md-12 col-lg-7 col-xl-6 d-flex align-items-stretch grid-margin">
                            <div class="card-body" >
                                <form j:id="formProspectos" class="forms-sample">

                                    <div id="mensaje" style="display: #{prospectocrystalBean.message.display}" class="alert alert-#{prospectocrystalBean.message.clase} mt-2">
                                        <div class="col-3">
                                            <i class="mdi #{prospectocrystalBean.message.ico} text-#{prospectocrystalBean.message.clase} icon-md "></i>
                                        </div>
                                        <div class="col-8">
                                            <span class="font-weight-medium text-right">#{prospectocrystalBean.message.mensaje}</span>
                                        </div>
                                    </div>
                                    
                                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" style="padding: 0.5rem 0.5rem !important;" data-toggle="tab" href="#panelprospecto" role="tab" >Prospecto</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" style="padding: 0.5rem 0.5rem !important;" href="#panelpareja" role="tab">Pareja</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" style="padding: 0.5rem 0.5rem !important;" href="#panelfinan" role="tab">Financiero</a>
                                        </li>

                                    </ul>
                                    
                                    <div class="tab-pane fade show active" id="panelprospecto" role="tabprospecto">
                                        <div class="card">
                                            <div class="card-body" style="padding: 1.2rem !important; ">
                                                <h5 class="card-title">Datos de Prospectos</h5> 
                                                <div class="form-group row">
                                                    <div class="col-sm-12">
                                                        <label for="nombres">Nombres Sr.: *</label>
                                                        <input type="text" class="form-control" id="nombres" placeholder="Nombres" j:value="#{prospectocrystalBean.prospecto.nombres}" required="true"/>

                                                    </div>

                                                </div>
                                                <div class="form-group row">

                                                    <div class="col-sm-12">
                                                        <label for="apellidos">Apellidos: *</label>
                                                        <input type="text" class="form-control" id="apellidos" placeholder="Apellidos" j:value="#{prospectocrystalBean.prospecto.apellidos}" required="true"/>

                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <div class="col-sm-8 col-8">
                                                        <label for="cargo">Ocupación: *</label>
                                                        <input type="text" class="form-control" id="ocupacion" placeholder="Ocupación" j:value="#{prospectocrystalBean.prospecto.ocupacion}" required="true"/>
                                                    </div>
                                                    <div class="col-sm-4 col-4">
                                                        <label for="edad">Edad: *</label>
                                                        <input type="number" id="edad" class="form-control"  placeholder="0" j:value="#{prospectocrystalBean.prospecto.edad}" min="0" step="1" maxlength="2" required="true" />
                                                    </div>

                                                </div>
                                                <div class="form-group row">

                                                    <div class="col-sm-4 col-12">
                                                        <label for="origen">Estado Civil: *</label>
                                                        <h:selectOneMenu class="form-control" id="edociv" value="#{prospectocrystalBean.prospecto.edociv}" required="true">
                                                            <f:selectItem itemLabel="Seleccione..." itemValue="" />
                                                            <f:selectItem itemValue = "S" itemLabel = "Soltero" /> 
                                                            <f:selectItem itemValue = "C" itemLabel = "Casado" /> 
                                                            <f:selectItem itemValue = "V" itemLabel = "Viudo" /> 
                                                            <f:selectItem itemValue = "D" itemLabel = "Divorciado" /> 
                                                            <f:selectItem itemValue = "CV" itemLabel = "Conviviente" /> 
                                                        </h:selectOneMenu>
                                                    </div>
                                                    <div class="col-sm-8 col-12">
                                                        <label for="distrito">Distrito: *</label>
                                                        <input type="text" class="form-control" id="distrito" placeholder="Distrito" j:value="#{prospectocrystalBean.prospecto.distrito}" required="true"/>
                                                    </div>
                                                </div>

                                                <div class="form-group row">
                                                    <div class="col-sm-6 col-12">
                                                        <label for="telefono1">Telf. Celular: *</label>
                                                        <input type="text" id="telefono1" class="form-control bfh-phone" data-format="+dd (ddd) ddd-ddd" placeholder="Celular" j:value="#{prospectocrystalBean.prospecto.telefono}" required="true" />
                                                    </div>
                                                    <div class="col-sm-6 col-12">
                                                        <label for="telefono2">Telf. de Oficina</label>
                                                        <input type="text" id="telefono2" class="form-control bfh-phone" data-format="+dd (ddd) ddd-ddd" placeholder="Oficina" j:value="#{prospectocrystalBean.prospecto.telefono2}"/>
                                                    </div>
                                                </div>
                                                <h5 class="card-title">Horario de Contacto</h5>   
                                                <div class="form-group row">

                                                    <div class="col-sm-6 col-12">
                                                        <label for="hora1">Desde</label>
                                                        <input type="time" class="form-control bfh-phone" j:value="#{prospectocrystalBean.prospecto.horadesde}"/>
                                                    </div>
                                                    <div class="col-sm-6 col-12">
                                                        <label for="hora2">Hasta</label>
                                                        <input type="time" class="form-control bfh-phone" j:value="#{prospectocrystalBean.prospecto.horahasta}"/>
                                                    </div>

                                                </div>

                                            </div>
                                            <div class="card-footer">
                                                <button class="btn btn-secondary btn-icons btn-rounded" id="prospectoContinue" title="Continuar">
                                                    <i class="mdi mdi-arrow-right-bold"></i>
                                                </button>

                                            </div>
                                        </div>

                                    </div>
                                    <div class="tab-pane fade" id="panelpareja" role="tabpareja" style="display:none;">
                                        <div class="card">
                                            <div class="card-body" style="padding: 1.2rem !important; ">
                                                <h5 class="card-title">Datos de Pareja</h5> 
                                                <div class="form-group row">
                                                    <div class="col-sm-12">
                                                        <label for="nombresra">Nombres Sra.:</label>
                                                        <input type="text" class="form-control" j:id="nombresra" placeholder="Nombres" j:value="#{prospectocrystalBean.prospecto.nombrespareja}"/>

                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <div class="col-sm-12">
                                                        <label for="apellidosra">Apellidos:</label>
                                                        <input type="text" class="form-control" j:id="apellidosra" placeholder="Apellidos" j:value="#{prospectocrystalBean.prospecto.apellidospareja}"/>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <div class="col-sm-8 col-8">
                                                        <label for="ocupacionsra">Ocupación</label>
                                                        <input type="text" class="form-control" j:id="ocupacionsra" placeholder="Ocupación" j:value="#{prospectocrystalBean.prospecto.ocupacionpareja}"/>
                                                    </div>
                                                    <div class="col-sm-4 col-4">
                                                        <label for="edadsra">Edad</label>
                                                        <input type="number" id="edadsra" class="form-control"  placeholder="0" j:value="#{prospectocrystalBean.prospecto.edadpareja}" min="0" step="1" maxlength="2" />
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <div class="col-sm-6 col-12">
                                                        <label for="telefonosra">Telf. Celular</label>
                                                        <input type="text" j:id="telefonosra" class="form-control bfh-phone" data-format="+dd (ddd) ddd-ddd" placeholder="Celular" j:value="#{prospectocrystalBean.prospecto.telefonopareja}" />
                                                    </div>
                                                </div>
                                                <h5 class="card-title">Horario de Contacto</h5>   
                                                <div class="form-group row">
                                                    <div class="col-sm-6 col-12">
                                                        <label for="hora1sra">Desde</label>
                                                        <input type="time" class="form-control bfh-phone" j:value="#{prospectocrystalBean.prospecto.horadesdepareja}"/>
                                                    </div>
                                                    <div class="col-sm-6 col-12">
                                                        <label for="hora2sra">Hasta</label>
                                                        <input type="time" class="form-control bfh-phone" j:value="#{prospectocrystalBean.prospecto.horahastapareja}"/>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="card-footer">
                                                <button class="btn btn-secondary btn-icons btn-rounded" id="anterirprospecto" title="Anterior" >
                                                    <i class="mdi mdi-arrow-left-bold"></i>
                                                </button>


                                                <button class="btn btn-secondary btn-icons btn-rounded" id="parejaContinue" title="Continuar">
                                                    <i class="mdi mdi-arrow-right-bold"></i>
                                                </button>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="tab-pane fade" id="panelfinan" role="tabfinan" style="display:none;">
                                        <div class="card">
                                            <div class="card-body" style="padding: 1.2rem !important; ">
                                                <h5 class="card-title">Tarjetas:</h5>   
                                                <div class="form-group row" style="text-align: center;">	
                                                    <div class="col-md-3 col-6">
                                                        <label class="image-checkbox" title="Visa">
                                                            <img src="../resources/images/visa.png" width="50%" class="imgcheck" />
                                                            <input type="checkbox"  j:value="#{prospectocrystalBean.prospecto.visa}"  style="display:none;"/>
                                                        </label>
                                                    </div>
                                                    <div class="col-md-3 col-6">
                                                        <label class="image-checkbox" title="Master">
                                                            <img src="../resources/images/master.png" width="50%" class="imgcheck"/>
                                                            <input type="checkbox"  j:value="#{prospectocrystalBean.prospecto.master}" style="display:none;" />
                                                        </label>
                                                    </div>
                                                    <div class="col-md-3 col-6">
                                                        <label class="image-checkbox" title="American">
                                                            <img src="../resources/images/american.png" width="50%" class="imgcheck"/>
                                                            <input type="checkbox"  j:value="#{prospectocrystalBean.prospecto.american}" style="display:none;" />
                                                        </label>
                                                    </div>
                                                    <div class="col-md-3 col-6">
                                                        <label class="image-checkbox" title="Diners">
                                                            <img src="../resources/images/diners.png" width="50%" class="imgcheck" />
                                                            <input type="checkbox"  j:value="#{prospectocrystalBean.prospecto.diner}" style="display:none;" />
                                                        </label>
                                                    </div>

                                                </div>

                                            </div>
                                            <div class="card-footer">
                                                <button class="btn btn-secondary btn-icons btn-rounded" id="anterirpareja" title="Anterior" >
                                                    <i class="mdi mdi-arrow-left-bold"></i>
                                                </button>
                                                <button class="btn btn-success float-right btn-sm" j:actionListener="#{prospectocrystalBean.registrar()}">Continuar</button>
                                            </div>
                                        </div>
                                    </div>




                                   


                                </form>
                            </div>
                        </div>

                    </div>
                </div>
                <script src="../resources/js/jquery-3.3.1.min.js"></script>
                <script src="../resources/js/bootstrap-formhelpers.min.js"></script>
                <script>

                    $(document).ready(function () {

                        setTimeout(function () {
                            $("#mensaje").fadeOut(1500);
                        }, 3000);
                    });
                </script>
                <script>
                    $(document).ready(function () {
                        var fecha = "#{prospectosBean.prospectos.fecha_ingreso}";
                        var now = new Date();
                        var day = ("0" + now.getDate()).slice(-2);
                        var month = ("0" + (now.getMonth() + 1)).slice(-2);
                        var today = now.getFullYear() + "-" + (month) + "-" + (day);

                        if (fecha !== "") {

                        } else {
                            $('#formProspectos\\:fecreg').val(today);
                        }



                    });
                </script>
                <script type="text/javascript">
                    jQuery(function ($) {
                        // init the state from the input
                        $(".image-checkbox").each(function () {
                            if ($(this).find('input[type="checkbox"]').first().attr("checked")) {
                                $(this).addClass('image-checkbox-checked');
                            } else {
                                $(this).removeClass('image-checkbox-checked');
                            }
                        });

                        // sync the state to the input
                        $(".image-checkbox").on("click", function (e) {
                            if ($(this).hasClass('image-checkbox-checked')) {
                                $(this).removeClass('image-checkbox-checked');
                                $(this).find('input[type="checkbox"]').first().removeAttr("checked");
                            } else {
                                $(this).addClass('image-checkbox-checked');
                                $(this).find('input[type="checkbox"]').first().attr("checked", "checked");
                            }

                            e.preventDefault();
                        });
                    });
                </script>
                <script>
                    $(function () {


                        $('#prospectoContinue').click(function (e) {
                            var nombre = $('#nombres').val().length
                                    , apellido = $('#apellidos').val().length
                                    , ocupacion = $('#ocupacion').val().length
                                    , edad = $('#edad').val().length
                                    , edociv = $('#formProspectos\\:edociv').val().length
                                    , distrito = $('#distrito').val().length
                                    , telefono = $('#telefono1').val().length - 1;

                            var edocivil = $('#formProspectos\\:edociv').val();        
                            var arr = [ "nombres", "apellidos", "ocupacion", "edad", "formProspectos\\:edociv", "distrito", "telefono1" ];
                            
                            if (nombre != 0 &amp;&amp; apellido != 0 &amp;&amp; ocupacion != 0 &amp;&amp; edad != 0 &amp;&amp; edociv != 0 &amp;&amp; distrito != 0 &amp;&amp; telefono != 0) {
                                
                                jQuery.each( arr, function( i, val ) {
                                    $('#'+val).removeClass("form-control-error");
                                });
                                
                                e.preventDefault();
                                 if(edocivil == 'C' || edocivil == 'CV'){
                                     $('#myTab a[href="#panelpareja"]').tab('show');
                                     $('#panelprospecto').css("display", "none");
                                     $('#panelpareja').css("display", "block");
                                     
                                 }else{
                                     $('#myTab a[href="#panelfinan"]').tab('show');
                                     $('#panelprospecto').css("display", "none");
                                     $('#panelfinan').css("display", "block");
                                 }
                                
                                
                                
                            }else{
                                e.preventDefault();
                                jQuery.each( arr, function( i, val ) {
                                    if(val=='telefono1'){
                                        if($('#'+val).val().length === 1){
                                        $('#'+val).addClass("form-control-error");
                                    }
                                    }else{
                                        if($('#'+val).val().length === 0){
                                        $('#'+val).addClass("form-control-error");
                                    }
                                    }
                                    
                                });
                            }
                        });

                        $('#parejaContinue').click(function (e) {
                            e.preventDefault();
                            $('#myTab a[href="#panelfinan"]').tab('show');
                            $('#panelfinan').css("display", "block");
                            $('#panelpareja').css("display", "none");
                        });

                        $('#anterirprospecto').click(function (e) {
                            e.preventDefault();
                            $('#myTab a[href="#panelprospecto"]').tab('show');
                            $('#panelpareja').css("display", "none");
                            $('#panelprospecto').css("display", "block");
                        });

                        $('#anterirpareja').click(function (e) {
                            e.preventDefault();
                            
                            var edocivil = $('#formProspectos\\:edociv').val();        
                            if(edocivil == 'C' || edocivil == 'CV'){
                                     $('#myTab a[href="#panelpareja"]').tab('show');
                                     $('#panelpareja').css("display", "block");
                                     $('#panelfinan').css("display", "none");
                                 }else{
                                     $('#myTab a[href="#panelprospecto"]').tab('show');
                                     $('#panelprospecto').css("display", "block");
                                     $('#panelfinan').css("display", "none");
                                 }
                        });

                        
                        
                        
                        
                    
                        
                    });

                </script>

            </ui:define>

        </ui:composition>

    </body>
</html>
